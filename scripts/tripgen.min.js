var w,stopped=!0,wArr=[],speed="";function run(){if(stopped)if("fast"===(speed=selectedRadio("speed"))||"medium"===speed){stopped=!1,document.getElementById("elapsed").textContent="Elapsed time: 0 seconds",document.getElementById("results-table").innerHTML="<tr id='result-header'><th>Text</th><th>Tripcode</th><th>Time taken</th></tr>",document.getElementById("gen_button").value="Stop!";var e=document.getElementById("wanted").value,t=selectedRadio("case"),n=selectedRadio("match"),a=0,d=setInterval(function(){stopped?clearInterval(d):document.getElementById("elapsed").textContent="Elapsed time: "+a+++" seconds"},1e3);if("fast"===speed){var r=window.navigator.hardwareConcurrency;null===r&&(r=4);for(var o=0;o<r;o++){var s=new Worker("scripts/tripworker.min.js");s.postMessage({wanted:e,case:t,match:n}),s.onmessage=function(e){updateTable(e.data.rand,e.data.cipher,e.data.startTime)},wArr.push(s)}}else(w=new Worker("scripts/tripworker.min.js")).postMessage({wanted:e,case:t,match:n}),w.onmessage=function(e){updateTable(e.data.rand,e.data.cipher,e.data.startTime)}}else document.getElementById("gen_button").value="Stop!",startGen();else if("fast"===speed){for(o=0;o<wArr.length;o++)wArr[o].terminate();stopped=!0,document.getElementById("elapsed").textContent="Stopped.",document.getElementById("gen_button").value="Start!"}else"medium"===speed?(w.terminate(),stopped=!0,document.getElementById("elapsed").textContent="Stopped.",document.getElementById("gen_button").value="Start!"):(document.getElementById("gen_button").value="Start!",stopGen())}function stopGen(){stopped=!0,document.getElementById("elapsed").textContent="Stopped."}function startGen(){des_init(),stopped=!1,document.getElementById("elapsed").textContent="Elapsed time: 0 seconds",document.getElementById("results-table").innerHTML="<tr id='result-header'><th>Text</th><th>Tripcode</th><th>Time taken</th></tr>";var e=document.getElementById("wanted").value,t=0,n=setInterval(function(){stopped?clearInterval(n):document.getElementById("elapsed").textContent="Elapsed time: "+t+++" seconds"},1e3),a=selectedRadio("case"),d=selectedRadio("match"),r=setInterval(function(){stopped?clearInterval(r):genTrip(e,t,a,d)},0)}function genTrip(e,t,n,a){var d=generateRandom(),r=makeTrip(d),o=r;"ignore"===n&&(o=r.toLowerCase(),e=e.toLowerCase()),"starts"===a?o.startsWith(e)&&updateTable(d,r,t):"contains"===a?-1!==o.indexOf(e)&&updateTable(d,r,t):o.endsWith(e)&&updateTable(d,r,t)}function updateTable(e,t,n){var a=document.getElementById("results-table"),d=document.createElement("tr"),r=document.createElement("td");r.textContent=e,d.appendChild(r);var o=document.createElement("td");o.textContent=t,d.appendChild(o);var s=document.createElement("td");s.textContent=n,d.appendChild(s),a.appendChild(d)}function generateRandom(){for(var e="",t="./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz",n=0;n<8;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function strtr(e,t,n){if(t.length!==n.length)return"Error";var a;for(a=0;a<t.length;a++)e=e.replace(new RegExp("\\".concat(t.charAt(a)),"g"),n.charAt(a));return e}function makeTrip(e){var t=e;t=strtr(t=(t=(t=t.concat("H.")).substring(1,3)).replace(/[^\.-z]/g,"."),":;<=>?@[\\]^_`","ABCDEFGabcdef");var n=descrypt(e,t);return n=n.substring(3,n.length)}function selectedRadio(e){for(var t=document.getElementsByName(e),n=0;n<t.length;n++)if(t[n].checked)return t[n].value}